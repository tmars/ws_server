<script>
var socket = new WebSocket("ws://localhost:4980");
socket.onopen = function() { 
	alert("Соединение установлено."); 
};

socket.onclose = function(event) { 
	if (event.wasClean) {
		alert('Соединение закрыто чисто');
	} else {
		alert('Обрыв соединения'); // например, "убит" процесс сервера
	}
	alert('Код: ' + event.code + ' причина: ' + event.reason);
};
 
socket.onmessage = function(event) { 
	alert("Получены данные " + event.data);
};

socket.onerror = function(error) { 
	alert("Ошибка " + error.message); 
};

var ind = 0;
function sendMessage()
{
	for(i=0;i<3;i++){
		console.log(ind);
		socket.send(document.getElementById('input').value);
		ind++;
	}
}
</script>
<input type="text" id="input" value="test">
<button onclick="sendMessage()">send</button>